<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="alternate" type="application/rss+xml" href="/enchird-wiki/blog/rss.xml" title="Developer Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/enchird-wiki/blog/atom.xml" title="Developer Wiki Atom Feed"><title data-rh="true">Kubernetes setup | Developer Wiki</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://dev.enchird.com/enchird-wiki/docs/devops/kubernetes-setup/"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kubernetes setup | Developer Wiki"><meta data-rh="true" name="description" content="### Disclaimer"><meta data-rh="true" property="og:description" content="### Disclaimer"><link data-rh="true" rel="icon" href="/enchird-wiki/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://dev.enchird.com/enchird-wiki/docs/devops/kubernetes-setup/"><link data-rh="true" rel="alternate" href="https://dev.enchird.com/enchird-wiki/docs/devops/kubernetes-setup/" hreflang="en"><link data-rh="true" rel="alternate" href="https://dev.enchird.com/enchird-wiki/docs/devops/kubernetes-setup/" hreflang="x-default"><link rel="stylesheet" href="/enchird-wiki/assets/css/styles.18f8af15.css">
<link rel="preload" href="/enchird-wiki/assets/js/runtime~main.459c4a71.js" as="script">
<link rel="preload" href="/enchird-wiki/assets/js/main.1220533d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/enchird-wiki/"><div class="navbar__logo"><img src="/enchird-wiki/img/logo.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/enchird-wiki/img/logo.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Enchird Developers</b></a><a class="navbar__item navbar__link navbar__link--active" href="/enchird-wiki/docs/intro/">Documentaion</a><a class="navbar__item navbar__link" href="/enchird-wiki/code-of-conduct/">Code of conduct</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/enchird-entity" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF" style="margin-left:2px">üåô</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF" style="margin-left:1px">‚òÄÔ∏è</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently dark mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/enchird-wiki/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/enchird-wiki/docs/nudle/desktop/introduction/">Nudle</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/enchird-wiki/docs/devops/kubernetes-setup/">Dev Ops</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/enchird-wiki/docs/devops/kubernetes-setup/">Kubernetes setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/enchird-wiki/docs/rage-store/intro/">Rage store</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/enchird-wiki/docs/guide-to-using-packages/">Guide to using packages</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Dev Ops</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/enchird-wiki/docs/devops/kubernetes-setup/">Kubernetes setup</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setup of the test Kubernetes cluster.</h1><blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="disclaimer">Disclaimer<a class="hash-link" href="#disclaimer" title="Direct link to heading">‚Äã</a></h3><p>This was done with:</p><ul><li>Ubuntu 16.04.6 LTS</li><li>Linux 4.4.0-142-generic x86_64</li><li>Docker version 20.10.7, build f0df350</li><li>Kubeadm Version<div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm version: </span><span class="token operator">&amp;</span><span class="token plain">version.Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Major:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain">, Minor:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;23&quot;</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;v1.23.5&quot;</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;c285e781331a3785a7f436042c65c5641ce8a9e9&quot;</span><span class="token plain">, </span><span class="token operator">&gt;</span><span class="token plain">GitTreeState:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;clean&quot;</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2022-03-16T15:57:37Z&quot;</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;go1.17.8&quot;</span><span class="token plain">, Compiler:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gc&quot;</span><span class="token plain">, Platform:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux/amd64&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li>kubectl version<div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Client Version: version.Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Major:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain">, Minor:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;23&quot;</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;v1.23.5&quot;</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;c285e781331a3785a7f436042c65c5641ce8a9e9&quot;</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;clean&quot;</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2022-03-16T15:58:47Z&quot;</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;go1.17.8&quot;</span><span class="token plain">, Compiler:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gc&quot;</span><span class="token plain">, Platform:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux/amd64&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server Version: version.Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Major:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain">, Minor:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;23&quot;</span><span class="token plain">, GitVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;v1.23.5&quot;</span><span class="token plain">, GitCommit:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;c285e781331a3785a7f436042c65c5641ce8a9e9&quot;</span><span class="token plain">, GitTreeState:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;clean&quot;</span><span class="token plain">, BuildDate:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2022-03-16T15:52:18Z&quot;</span><span class="token plain">, GoVersion:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;go1.17.8&quot;</span><span class="token plain">, Compiler:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gc&quot;</span><span class="token plain">, Platform:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux/amd64&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div>If your setup does not correspond to these versions, this documentation might not work. In that case, please refer to the official Kubernetes documentation for settting up a production cluster.</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">‚Äã</a></h2><p>Before beginning, the following requirements for the nodes should be satisfied: </p><ul><li>A compatible Linux host. The Kubernetes project provides generic instructions for Linux distributions based on Debian and Red Hat, and those distributions without a package manager.</li><li>2 GB or more of RAM per machine (any less will leave little room for your apps).</li><li>2 CPUs or more.</li><li>Full network connectivity between all machines in the cluster (public or private network is fine).</li><li>Unique hostname, MAC address, and product_uuid for every node. See here for more details.</li><li>Certain ports are open on your machines. See here for more details.</li><li>Swap disabled. You MUST disable swap in order for the kubelet to work properly.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="container-runtimes">Container runtimes<a class="hash-link" href="#container-runtimes" title="Direct link to heading">‚Äã</a></h2><p>You need to install a container runtime into each node in the cluster so that Pods can run there.</p><p>Follow the instructions on the official Docker documentation to install the Docker Engine on the nodes for the cluster.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="disabling-the-swap">Disabling the swap<a class="hash-link" href="#disabling-the-swap" title="Direct link to heading">‚Äã</a></h2><p>We will have to disable the swap on all the nodes. This is done by first running the command, to disable the swap:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">swapoff -a</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Then modify the file located at <code>/etc/fstab</code> and comment the file with the swap to get something similar to the output below:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># /etc/fstab: static file system information.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Use &#x27;blkid&#x27; to print the universally unique identifier for a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># device; this may be used with UUID= as a more robust way to name devices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># that works even if disks are added and removed. See fstab(5).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/dev/mapper/kube--test--master--1--vg-root /               ext4    errors=remount-ro 0       1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># /boot was on /dev/sda1 during installation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">UUID=e9a0fd24-129d-4362-acb1-c9bf100bce60 /boot           ext2    defaults        0       2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#/dev/mapper/kube--test--master--1--vg-swap_1 none            swap    sw              0       0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="preparing-the-master-machine">Preparing the master machine.<a class="hash-link" href="#preparing-the-master-machine" title="Direct link to heading">‚Äã</a></h2><p>The VMs created with Promox already satisfy the first five requirements.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="letting-iptables-see-bridged-traffic">Letting iptables see bridged traffic<a class="hash-link" href="#letting-iptables-see-bridged-traffic" title="Direct link to heading">‚Äã</a></h3><p>Make sure that the <code>br_netfilter</code> module is loaded. This can be done by running <code>lsmod | grep br_netfilter</code>. To load it explicitly call <code>sudo modprobe br_netfilter</code></p><p>As a requirement for your Linux Node&#x27;s iptables to correctly see bridged traffic, you should ensure <code>net.bridge.bridge-nf-call-iptables</code> is set to 1 in your <code>sysctl</code> config, e.g.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo sysctl --system</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="installing-runtime">Installing runtime<a class="hash-link" href="#installing-runtime" title="Direct link to heading">‚Äã</a></h3><p>You will install these packages on all of your machines:</p><ul><li><p><code>kubeadm</code>: the command to bootstrap the cluster.</p></li><li><p><code>kubelet</code>: the component that runs on all of the machines in your cluster and does things like starting pods and containers.</p></li><li><p><code>kubectl</code>: the command line util to talk to your cluster.</p></li></ul><ol><li>Update the apt package index and install packages needed to use the Kubernetes apt repository:</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install -y apt-transport-https ca-certificates curl</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="2"><li>Download the Google Cloud public signing key:</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="3"><li>Add the Kubernetes apt repository:</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&quot; | sudo tee /etc/apt/sources.list.d/kubernetes.list</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="4"><li>Update apt package index, install kubelet, kubeadm and kubectl, and pin their version:</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install -y kubelet kubeadm kubectl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-mark hold kubelet kubeadm kubectl</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="initializing-the-control-plane">Initializing the control plane<a class="hash-link" href="#initializing-the-control-plane" title="Direct link to heading">‚Äã</a></h2><p>The control-plane node is the machine where the control plane components run, including etcd (the cluster database) and the API Server (which the <code>kubectl</code> command line tool communicates with).</p><p>We would first need to specify the CGroup driver. Create a file called <code>kubeadm-config.yaml</code> and write the following contents:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># kubeadm-config.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ClusterConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: kubeadm.k8s.io/v1beta3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubernetesVersion: v1.21.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: KubeletConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: kubelet.config.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cgroupDriver: cgroupfs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To initialize the control-plane node run with the configuration file:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo kubeadm init --config kubeadm-config.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You will get a result as the one below:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your Kubernetes control-plane has initialized successfully!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alternatively, if you are the root user, you can run:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  export KUBECONFIG=/etc/kubernetes/admin.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Then you can join any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm join 10.10.10.70:6443 --token znxbm6.ro1h1xpv69n3tpfb \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        --discovery-token-ca-cert-hash sha256:2c241d4aa1be5c06333338cd379dbaf46194d2371aa45804b566931cb8776860</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploying-the-pod-network-weavenet">Deploying the pod network (Weavenet)<a class="hash-link" href="#deploying-the-pod-network-weavenet" title="Direct link to heading">‚Äã</a></h2><p>Weave Net can be installed onto your CNI-enabled Kubernetes cluster with a single command:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl apply -f &quot;https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d &#x27;\n&#x27;)&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This configuration won‚Äôt enable encryption by default. If your data plane traffic isn‚Äôt secured that could allow malicious actors to access your pod network.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="joining-your-nodes">Joining your nodes<a class="hash-link" href="#joining-your-nodes" title="Direct link to heading">‚Äã</a></h2><p>The nodes are where your workloads (containers and Pods, etc) run. To add new nodes to your cluster do the following for each machine:</p><ul><li><p>SSH to the machine</p></li><li><p>Become root (e.g. sudo su -)</p></li><li><p>Install a runtime if needed</p></li><li><p>Run the command that was output by kubeadm init. For example:</p></li></ul><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm join --token &lt;token&gt; &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If you do not have the token, you can get it by running the following command on the control-plane node:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm token list</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The output is similar to this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">TOKEN                    TTL  EXPIRES              USAGES           DESCRIPTION            EXTRA GROUPS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8ewj1p.9r9hcjoqgajrj4gi  23h  2018-06-12T02:51:28Z authentication,  The default bootstrap  system:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                   signing          token generated by     bootstrappers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                    &#x27;kubeadm init&#x27;.        kubeadm:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                           default-node-token</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>By default, tokens expire after 24 hours. If you are joining a node to the cluster after the current token has expired, you can create a new token by running the following command on the control-plane node:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm token create</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The output is similar to this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">5didvk.d09sbcov8ph2amjw</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If you don&#x27;t have the value of --discovery-token-ca-cert-hash, you can get it by running the following command chain on the control-plane node:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   openssl dgst -sha256 -hex | sed &#x27;s/^.* //&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The output is similar to:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">8cb2de97839780a412b93877f8507ad6c94f73add17d5d7058e91741c9d5ec78</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploy-and-access-the-kubernetes-dashboard">Deploy and Access the kubernetes Dashboard<a class="hash-link" href="#deploy-and-access-the-kubernetes-dashboard" title="Direct link to heading">‚Äã</a></h2><p>To protect your cluster data, Dashboard deploys with a minimal RBAC configuration by default. Currently, Dashboard only supports logging in with a Bearer Token.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="deploy-the-dashboard-ui">Deploy the Dashboard UI<a class="hash-link" href="#deploy-the-dashboard-ui" title="Direct link to heading">‚Äã</a></h3><p>The Dashboard UI is not deployed by default. To deploy it, run the following command:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="configure-dashboard-access">Configure Dashboard access<a class="hash-link" href="#configure-dashboard-access" title="Direct link to heading">‚Äã</a></h3><p>Edit the Kubernetes dashboard service created in the previous section using the <code>kubectl edit</code> command, as shown below. Running the below command will open an editable service configuration file displaying the service configuration.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl edit service/kubernetes-dashboard -n kubernetes-dashboard</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Once the file is opened, change the type of service from <code>ClusterIP</code> to <code>NodePort</code> and save the file as shown below. By default, the service is only available internally to the cluster (<code>ClusterIP</code>) but changing to <code>NodePort</code> exposes the service to the outside.</p><p>In the below code snippet, the Kubernetes dashboard service is listening on TCP port 443 and maps TCP port 8443 from port 443 to the dashboard pod port TCP/8443.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Updated the type to NodePort in the service.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  port: 443 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  protocol: TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  targetPort: 8443</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">selector:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  k8s-app: kubernetes-dashboard</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sessionAffinity: None</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">type: NodePort </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Next, delete the Kubernetes dashboard pod using the name found in step three using the <code>kubectl delete</code> command. Find the exact name of this pod by using the <code>kubectl get pods --all-namespaces</code> command.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete pod kubernetes-dashboard-546cbc58cd-7ggc6 -n kubernetes-dashboard</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><blockquote><p>Whenever you modify the service type, you must delete the pod. Once deleted, Kubernetes will create a new one for you with the updated service type to access the entire network.</p></blockquote><p>Verify the kubernetes-dashboard service has the correct type by running the <code>kubectl get svc --all-namespace</code> command. You will now notice that the service type has changed to NodePort, and the service exposes the pod‚Äôs internal TCP port 30439 using the outside TCP port of 443.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get svc --all-namespaces</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="creating-the-sample-user">Creating the sample user.<a class="hash-link" href="#creating-the-sample-user" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="creating-the-service-account">Creating the Service Account.<a class="hash-link" href="#creating-the-service-account" title="Direct link to heading">‚Äã</a></h4><p>Copy the following content to a <code>dashboard-adminuser.yaml</code> file.</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: admin-user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: kubernetes-dashboard</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="creating-the-clusterrolebinding">Creating the ClusterRoleBinding<a class="hash-link" href="#creating-the-clusterrolebinding" title="Direct link to heading">‚Äã</a></h4><p>In most cases after provisioning the cluster using kops, kubeadm or any other popular tool, the ClusterRole cluster-admin already exists in the cluster. We can use it and create only a ClusterRoleBinding for our ServiceAccount. If it does not exist then you need to create this role first and grant required privileges manually.</p><p>Copy the content in the same <code>dashboard-adminuser.yaml</code> separated by <code>---</code>:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: admin-user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">roleRef:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  kind: ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: cluster-admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subjects:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- kind: ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: admin-user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: kubernetes-dashboard</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After the contents have been written, run <code>kubectl apply -f dashboard-adminuser.yaml</code> to apply the configurations.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getting-a-bearer-token">Getting a bearer token<a class="hash-link" href="#getting-a-bearer-token" title="Direct link to heading">‚Äã</a></h4><p>Now we need to find the token we can use to log in. Execute the following command:</p><div class="codeBlockContainer_I0IT language-s theme-code-block"><div class="codeBlockContent_wNvx s"><pre tabindex="0" class="prism-code language-s codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath=&quot;{.secrets[0].name}&quot;) -o go-template=&quot;{{.data.token | base64decode}}&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>It should print something like:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxT3R3cnRzejlEanZublUySk1OSUhjUFZ6VHZqTzc3cGdOcy16Q2hfNVkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLXY2djV6Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1ZWI4NjQ2OS0wMzViLTQxODUtYmQ3Ny1lMTI3MmVjY2EyMWMiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.gR0tRFilgLN0aJs8g9_thFN55vSaxd0BOBhaJBzerjTNFJ-cegiDZ0f3qLm4tWwazk_4921Ul5tjK-vp4Vr3jnqISL_0KC50XzAexdk_1vr0qxpGDR4V7SGu3EeihaVpBoEr743itrlL_YqwfpIpZPAzrL-QNAA0KEUWgCtFY3qrkvWvdirL0mQUiiKPokJwhkeGJUot9hzJIPPjWUBjeEaBCQsR5l9q1fucUG0LVG4DwntPxqQMVDCBbAHbndv0j5AY3XksMxStCawtdJH0_RoLUnedRO7X6QkbSYJXs0N8Mq0-bIhZ9sZKqnXCj6xR6HQezUBiuN46IfvqJIoU4w</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/enchird-wiki/docs/nudle/mobile/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/enchird-wiki/docs/rage-store/intro/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#container-runtimes" class="table-of-contents__link toc-highlight">Container runtimes</a></li><li><a href="#disabling-the-swap" class="table-of-contents__link toc-highlight">Disabling the swap</a></li><li><a href="#preparing-the-master-machine" class="table-of-contents__link toc-highlight">Preparing the master machine.</a><ul><li><a href="#letting-iptables-see-bridged-traffic" class="table-of-contents__link toc-highlight">Letting iptables see bridged traffic</a></li><li><a href="#installing-runtime" class="table-of-contents__link toc-highlight">Installing runtime</a></li></ul></li><li><a href="#initializing-the-control-plane" class="table-of-contents__link toc-highlight">Initializing the control plane</a></li><li><a href="#deploying-the-pod-network-weavenet" class="table-of-contents__link toc-highlight">Deploying the pod network (Weavenet)</a></li><li><a href="#joining-your-nodes" class="table-of-contents__link toc-highlight">Joining your nodes</a></li><li><a href="#deploy-and-access-the-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Deploy and Access the kubernetes Dashboard</a><ul><li><a href="#deploy-the-dashboard-ui" class="table-of-contents__link toc-highlight">Deploy the Dashboard UI</a></li><li><a href="#configure-dashboard-access" class="table-of-contents__link toc-highlight">Configure Dashboard access</a></li><li><a href="#creating-the-sample-user" class="table-of-contents__link toc-highlight">Creating the sample user.</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/enchird-wiki/docs/intro/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/enchird-wiki/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/enchird-entity" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Enchird Technologies Co Ltd</div></div></div></footer></div>
<script src="/enchird-wiki/assets/js/runtime~main.459c4a71.js"></script>
<script src="/enchird-wiki/assets/js/main.1220533d.js"></script>
</body>
</html>